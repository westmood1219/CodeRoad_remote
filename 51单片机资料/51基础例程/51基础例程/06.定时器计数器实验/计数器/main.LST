C51 COMPILER V9.52.0.0   MAIN                                                              03/28/2022 16:17:42 PAGE 1   


C51 COMPILER V9.52.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: f:\Keil\C51\BIN\C51.EXE main.c BROWSE DEBUG OBJECTEXTEND TABS(2)

line level    source

   1          /*********************************************************************************************************
   2          * 模块名称: Main.c
   3          * 摘    要: 主文件，包含初始化函数和main函数
   4          * 当前版本: 1.0.0
   5          * 作    者: Leyutek(COPYRIGHT 2018 - 2021 Leyutek. All rights reserved.)
   6          * 完成日期: 2022年2月1日
   7          * 内    容: 
   8          * 注    意: 
   9          **********************************************************************************************************
  10          * 取代版本: 
  11          * 作    者: 
  12          * 完成日期: 
  13          * 修改内容: 
  14          * 修改文件: 
  15          *********************************************************************************************************/
  16          /*********************************************************************************************************
  17          *                                              包含头文件
  18          *********************************************************************************************************/
  19          #include <reg52.h>
  20          
  21          /*********************************************************************************************************
  22          *                                              宏定义
  23          *********************************************************************************************************/
  24          sbit LED1 = P2^4; //定义LED1
  25          
  26          /*********************************************************************************************************
  27          *                                              枚举结构体定义
  28          *********************************************************************************************************/
  29          
  30          /*********************************************************************************************************
  31          *                                              内部变量
  32          *********************************************************************************************************/
  33          
  34          /*********************************************************************************************************
  35          *                                              内部函数声明
  36          *********************************************************************************************************/
  37          static void InitInterrupt(void);
  38          static void InitTimer0(void);
  39          
  40          /*********************************************************************************************************
  41          *                                              内部函数实现
  42          *********************************************************************************************************/
  43          
  44          
  45          /*********************************************************************************************************
  46          * 函数名称: InitTimer0
  47          * 函数功能: 配置计数器0
  48          * 输入参数: nms-延迟时间（毫秒）
  49          * 输出参数: void
  50          * 返 回 值: void
  51          * 创建日期: 2022年2月1日
  52          * 注    意: 
  53          *********************************************************************************************************/
  54          static void InitTimer0()
  55          {
C51 COMPILER V9.52.0.0   MAIN                                                              03/28/2022 16:17:42 PAGE 2   

  56   1        TMOD = 0x05;  //设置 计数器0 工作模式1，作为计数器使用
  57   1        TH0  = 0xFF;  //设置 计数器0 计数初值高8位
  58   1        TL0  = 0xFD;  //设置 计数器0 计数初值低8位，计数至3后溢出
  59   1        TR0  = 1;     //打开 计数器0
  60   1      }
  61          
  62          /*********************************************************************************************************
  63          * 函数名称: InitInterrupt
  64          * 函数功能: 配置中断
  65          * 输入参数: void
  66          * 输出参数: void
  67          * 返 回 值: void
  68          * 创建日期: 2022年2月1日
  69          * 注    意: 
  70          *********************************************************************************************************/
  71          static void InitInterrupt()
  72          {
  73   1        ET0 = 1;   //打开 计数器0 中断允许
  74   1        EA  = 1;   //打开 总中断允许
  75   1      }
  76          
  77          /*********************************************************************************************************
  78          * 函数名称: main
  79          * 函数功能: 主函数
  80          * 输入参数: void
  81          * 输出参数: void
  82          * 返 回 值: void
  83          * 创建日期: 2022年2月1日
  84          * 注    意: 
  85          *********************************************************************************************************/
  86          void main()
  87          { 
  88   1        InitTimer0();     //配置计数器0
  89   1        InitInterrupt();  //配置中断
  90   1        while (1)
  91   1        {
  92   2      
  93   2        }
  94   1      }
  95          
  96          /*********************************************************************************************************
  97          * 函数名称: Timer0_Handler
  98          * 函数功能: 外部中断0中断服务函数
  99          * 输入参数: void
 100          * 输出参数: void
 101          * 返 回 值: void
 102          * 创建日期: 2022年2月1日
 103          * 注    意: 
 104          *********************************************************************************************************/
 105          void Timer0_Handler() interrupt 1
 106          {
 107   1        TH0 = 0XFF;                      //重新设置 计数器0 计数初值高8位 
 108   1        TL0 = 0XFD;                      //重新设置 计数器0 计数初值低8位，计数至3后溢出
 109   1        LED1 = ~LED1;                    //对LED1状态取反，表示翻转LED灯开关状态
 110   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     34    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
C51 COMPILER V9.52.0.0   MAIN                                                              03/28/2022 16:17:42 PAGE 3   

   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
