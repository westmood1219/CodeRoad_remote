C51 COMPILER V9.01   MAIN                                                                  03/01/2022 15:00:06 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: D:\Keil\C51\BIN\C51.EXE main.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          /*********************************************************************************************************
   2          * 模块名称: Main.c
   3          * 摘    要: 主文件，包含初始化函数和main函数
   4          * 当前版本: 1.0.0
   5          * 作    者: Leyutek(COPYRIGHT 2018 - 2021 Leyutek. All rights reserved.)
   6          * 完成日期: 2022年2月1日
   7          * 内    容: 
   8          * 注    意: 
   9          **********************************************************************************************************
  10          * 取代版本: 
  11          * 作    者: 
  12          * 完成日期: 
  13          * 修改内容: 
  14          * 修改文件: 
  15          *********************************************************************************************************/
  16          /*********************************************************************************************************
  17          *                                              包含头文件
  18          *********************************************************************************************************/
  19          #include <reg52.h>
  20          
  21          /*********************************************************************************************************
  22          *                                              宏定义
  23          *********************************************************************************************************/
  24          sbit LED1 = P2^4; //定义LED1
  25          
  26          /*********************************************************************************************************
  27          *                                              枚举结构体定义
  28          *********************************************************************************************************/
  29          
  30          /*********************************************************************************************************
  31          *                                              内部变量
  32          *********************************************************************************************************/
  33          
  34          /*********************************************************************************************************
  35          *                                              内部函数声明
  36          *********************************************************************************************************/
  37          static void InitInterrupt(void);
  38          static void InitTimer0(void);
  39          
  40          /*********************************************************************************************************
  41          *                                              内部函数实现
  42          *********************************************************************************************************/
  43          
  44          /*********************************************************************************************************
  45          * 函数名称: InitInterrupt
  46          * 函数功能: 配置定时器0中断
  47          * 输入参数: xms-延迟时间（毫秒）
  48          * 输出参数: void
  49          * 返 回 值: void
  50          * 创建日期: 2022年2月1日
  51          * 注    意: 
  52          *********************************************************************************************************/
  53          static void InitInterrupt()
  54          {
  55   1        ET0 = 1;   //打开定时器0的中断允许。
C51 COMPILER V9.01   MAIN                                                                  03/01/2022 15:00:06 PAGE 2   

  56   1        EA  = 1;   //打开总中断
  57   1      }
  58          
  59          /*********************************************************************************************************
  60          * 函数名称: InitInterrupt
  61          * 函数功能: 配置定时器0中断
  62          * 输入参数: nms-延迟时间（毫秒）
  63          * 输出参数: void
  64          * 返 回 值: void
  65          * 创建日期: 2022年2月1日
  66          * 注    意: 
  67          *********************************************************************************************************/
  68          static void InitTimer0()
  69          {
  70   1        TMOD = 0x01;  //配置定时器0的工作方式1
  71   1        TH0  = 0xFC;  
  72   1        TL0  = 0x18;  //给定时器赋初值，定时1ms
  73   1        TR0  = 1;     //打开定时器
  74   1      }
  75          
  76          /*********************************************************************************************************
  77          * 函数名称: main
  78          * 函数功能: 主函数
  79          * 输入参数: void
  80          * 输出参数: void
  81          * 返 回 值: void
  82          * 创建日期: 2022年2月1日
  83          * 注    意: 
  84          *********************************************************************************************************/
  85          void main()
  86          {
  87   1        InitInterrupt();  //配置定时器0中断
  88   1        InitTimer0();
  89   1        while (1);
  90   1      }
  91          
  92          /*********************************************************************************************************
  93          * 函数名称: External
  94          * 函数功能: 外部中断0的中断服务函数
  95          * 输入参数: void
  96          * 输出参数: void
  97          * 返 回 值: void
  98          * 创建日期: 2022年2月1日
  99          * 注    意: 
 100          *********************************************************************************************************/
 101          void Timer0() interrupt 1
 102          {
 103   1        static unsigned int s_iCounter;
 104   1        TH0 = 0XFC;    //给定时器赋初值，定时1ms
 105   1        TL0 = 0X18;
 106   1        s_iCounter++;
 107   1        if(s_iCounter == 1000)
 108   1        {
 109   2          s_iCounter = 0;
 110   2          LED1 = ~LED1;    
 111   2        }
 112   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     64    ----
   CONSTANT SIZE    =   ----    ----
C51 COMPILER V9.01   MAIN                                                                  03/01/2022 15:00:06 PAGE 3   

   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      2    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
