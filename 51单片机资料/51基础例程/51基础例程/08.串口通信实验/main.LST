C51 COMPILER V9.01   MAIN                                                                  03/01/2022 14:58:37 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: D:\Keil\C51\BIN\C51.EXE main.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          /*********************************************************************************************************
   2          * 模块名称: Main.c
   3          * 摘    要: 主文件，包含初始化函数和main函数
   4          * 当前版本: 1.0.0
   5          * 作    者: Leyutek(COPYRIGHT 2018 - 2021 Leyutek. All rights reserved.)
   6          * 完成日期: 2022年2月1日
   7          * 内    容: 
   8          * 注    意: 
   9          **********************************************************************************************************
  10          * 取代版本: 
  11          * 作    者: 
  12          * 完成日期: 
  13          * 修改内容: 
  14          * 修改文件: 
  15          *********************************************************************************************************/
  16          /*********************************************************************************************************
  17          *                                              包含头文件
  18          *********************************************************************************************************/
  19          #include <reg52.h>
  20          
  21          /*********************************************************************************************************
  22          *                                              宏定义
  23          *********************************************************************************************************/
  24          
  25          /*********************************************************************************************************
  26          *                                              枚举结构体定义
  27          *********************************************************************************************************/
  28          
  29          /*********************************************************************************************************
  30          *                                              内部变量
  31          *********************************************************************************************************/
  32          
  33          /*********************************************************************************************************
  34          *                                              内部函数声明
  35          *********************************************************************************************************/
  36          static void InitUART(void);
  37          static void InitInterrupt(void);
  38          
  39          /*********************************************************************************************************
  40          *                                              内部函数实现
  41          *********************************************************************************************************/
  42          /*********************************************************************************************************
  43          * 函数名称: InitUART
  44          * 函数功能: 串口初始化
  45          * 输入参数: void
  46          * 输出参数: void
  47          * 返 回 值: void
  48          * 创建日期: 2022年2月1日
  49          * 注    意: 
  50          *********************************************************************************************************/
  51          static void InitUART()
  52          {
  53   1        SCON = 0X50;            //设置为工作方式1
  54   1        TMOD = 0X20;            //设置计数器工作方式2
  55   1        PCON = 0X80;            //波特率加倍
C51 COMPILER V9.01   MAIN                                                                  03/01/2022 14:58:37 PAGE 2   

  56   1        TH1  = 0XF3;            //计数器初始值设置，设定波特率为4800
  57   1        TL1  = 0XF3;
  58   1        ES   = 1;                    //打开接收中断
  59   1        EA   = 1;                    //打开总中断
  60   1        TR1  = 1;                    //打开计数器
  61   1      }
  62          
  63          /*********************************************************************************************************
  64          * 函数名称: InitInterrupt
  65          * 函数功能: 中断初始化
  66          * 输入参数: void
  67          * 输出参数: void
  68          * 返 回 值: void
  69          * 创建日期: 2022年2月1日
  70          * 注    意: 
  71          *********************************************************************************************************/
  72          static void InitInterrupt()
  73          {     
  74   1        EA = 1;         //打开中断总控制位
  75   1        ES = 1;         //打开串口中断
  76   1      }
  77          
  78          /*********************************************************************************************************
  79          * 函数名称: main
  80          * 函数功能: 主函数
  81          * 输入参数: void
  82          * 输出参数: void
  83          * 返 回 值: void
  84          * 创建日期: 2022年2月1日
  85          * 注    意: 
  86          *********************************************************************************************************/
  87          void main()
  88          {
  89   1        InitUART();         //初始化串口
  90   1        InitInterrupt();    //初始化中断
  91   1        while (1)
  92   1        {
  93   2          ;
  94   2        }
  95   1      }
  96          
  97          /*********************************************************************************************************
  98          * 函数名称: UARTHandler
  99          * 函数功能: 串口中断服务函数
 100          * 输入参数: void
 101          * 输出参数: void
 102          * 返 回 值: void
 103          * 创建日期: 2022年2月1日
 104          * 注    意: 
 105          *********************************************************************************************************/
 106          void UARTHandler() interrupt 4
 107          {
 108   1        static unsigned char s_iBuffer;
 109   1        s_iBuffer = SBUF;   //将数据从寄存器中取出
 110   1        RI = 0;             //清除接收中断标志位
 111   1        SBUF = s_iBuffer;   //将数据放入到寄存器
 112   1        while(!TI);         //等待发送数据完成
 113   1        TI = 0;             //清除发送完成标志位
 114   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
C51 COMPILER V9.01   MAIN                                                                  03/01/2022 14:58:37 PAGE 3   

   CODE SIZE        =     49    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      1    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
